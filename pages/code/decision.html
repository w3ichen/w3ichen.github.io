<!DOCTYPE html>
<html>
<head>
	<title>Decision Matrix</title>
</head>
<body>
	<div>
		<h>Decision Matrix</h>
		<div>Determines Best Mode of Transportation for You</div>
		<div>Ranking Importance</div>
		<div>
		<input type="text" name="from" id="from" placeholder="from location">
		<input type="text" name="to" id="to" placeholder="to location">
		<select id="country" name="country">
			<option value="CA">CA</option>
			<option value="US">US</option>
			<option value="GB">GB</option>
			<option value="FR">FR</option>
			<option value="DE">DE</option>
			<option value="ES">ES</option>
		</select>
		</div>
		<div><strong>Cost</strong>
			Not Important
			<input type="range" name="cost" id="cost">
		Very Important</div>
		<div><strong>Time</strong>
			Not Important
			<input type="range" name="time" id="time">
		Very Important</div>
		<div><strong>Safety</strong>
			Not Important
			<input type="range" name="safety" id="safety">
		Very Important</div>
		<button onclick="go()">Next</button>
		<script type="text/javascript">
			function go(){
			const key = 'G1DzjsJD5JZ3vMKMRgJeaUJ5Trc0rnx0'
	
			var from_address = document.getElementById('from').value.split(" ").join("%20");
			var to_address = document.getElementById('to').value.split(" ").join("%20");
			var country = document.getElementById('country').value;
			const from_url ='https://api.tomtom.com/search/2/geocode/'+from_address+'.json?limit=1&countrySet='+country+'&key='+key;
			const to_url ='https://api.tomtom.com/search/2/geocode/'+to_address+'.json?limit=1&countrySet='+country+'&key='+key;

			fetch(from_url)
			.then(data=>{return data.json()})
			.then(res=> { 
				var from_latlon = [(res.results[0].position.lat),(res.results[0].position.lon)];
				fetch(to_url)
				.then(data=>{return data.json()})
				.then(res=> { 
					var to_latlon = [(res.results[0].position.lat),(res.results[0].position.lon)];
					// now get the time
					var walk_url = 'https://api.tomtom.com/routing/1/calculateRoute/'+from_latlon[0]+'%2C'+from_latlon[1]+'%3A'+to_latlon[0]+'%2C'+to_latlon[1]+'/json?travelMode=pedestrian&key='+key;
					var bicycle_url = 'https://api.tomtom.com/routing/1/calculateRoute/'+from_latlon[0]+'%2C'+from_latlon[1]+'%3A'+to_latlon[0]+'%2C'+to_latlon[1]+'/json?travelMode=bicycle&key='+key;
					var motorcycle_url = 'https://api.tomtom.com/routing/1/calculateRoute/'+from_latlon[0]+'%2C'+from_latlon[1]+'%3A'+to_latlon[0]+'%2C'+to_latlon[1]+'/json?travelMode=motorcycle&key='+key;
					var car_url = 'https://api.tomtom.com/routing/1/calculateRoute/'+from_latlon[0]+'%2C'+from_latlon[1]+'%3A'+to_latlon[0]+'%2C'+to_latlon[1]+'/json?travelMode=car&key='+key;
					fetch(walk_url)
					.then(data=>{return data.json()})
					.then(res=> { 
						var walk_time = res.routes[0].summary.travelTimeInSeconds;
						console.log(walk_time)
					fetch(bicycle_url)
					.then(data=>{return data.json()})
					.then(res=> { 
						var bicycle_time = res.routes[0].summary.travelTimeInSeconds;
						console.log(bicycle_time)
					fetch(motorcycle_url)
					.then(data=>{return data.json()})
					.then(res=> { 
						var motorcycle_time = res.routes[0].summary.travelTimeInSeconds;
						console.log(motorcycle_time)
					fetch(car_url)
					.then(data=>{return data.json()})
					.then(res=> { 
						var distace_km = (res.routes[0].summary.lengthInMeters)/1000;
						var car_time = res.routes[0].summary.travelTimeInSeconds;
						console.log(car_time)
						console.log(distace_km,"KM")
					})  	 })  	}) 		}) 



				}) 
			})


			


			

			// 		fetch(from_url)
			// .then(data=>{return data.json()})
			// .then(res=> { 

			// }) 

			var options = {
						walking:{cost:0, time:-35, safety:0},
						bicycle:{cost:-1, time:-20, safety:-2},
						motorcycle:{cost:-5, time:-8, safety:-5},
						car:{cost:-10, time: -8, safety:-1}
					};

			} // end of function

		</script>





    </div>
</body>
</html>